<div class="container mx-auto px-4 py-6">
  <!-- Search Summary -->
  <div class="mb-4">
    <h1 class="text-2xl font-bold text-teal-900">
      Showing results for: "<%= searchValue %>"
    </h1>
  </div>
  
  <!-- Filter Form -->
  <form action="/search-page" method="GET" class="space-y-4">
    <!-- Search Input -->
    <div>
      <input
        type="text"
        name="searchValue"
        class="border border-gray-300 rounded p-2 w-full"
        placeholder="Search..."
        value="<%= searchValue || '' %>"
      />
    </div>
  
      <!-- Section Filter -->
    <div class="relative">
      <label for="sections" class="block font-bold mb-2">Section</label>
      <button
        type="button"
        id="sectionToggle"
        class="w-full text-left bg-white border border-gray-300 rounded p-2"
        onclick="toggleDropdown()"
      >
        Section â–¼
      </button>
      <div
        id="sectionDropdown"
        class="absolute bg-white border border-gray-300 rounded shadow-md p-4 space-y-2 hidden"
      >
        <div class="flex items-center">
          <input
            type="checkbox"
            name="sections"
            id="section-any"
            value="Any"
            class="mr-2"
            <% if (selectedSections.includes('Any') || selectedSections.length === 0) { %>checked<% } %>
          />
          <label for="section-any" class="text-gray-700">Any</label>
        </div>
        <% sections.forEach(section => { %>
        <div class="flex items-center">
          <input
            type="checkbox"
            name="sections"
            id="section-<%= section.slug %>"
            value="<%= section.id %>"
            class="mr-2"
            <% if (selectedSections.includes(section.id)) { %>checked<% } %>
          />
          <label for="section-arts" class="text-gray-700"><%= section.name %></label>
        </div>
        <% }) %>
        <!-- Add more sections as needed -->
      </div>
    </div>
  
      <!-- Date Range Filter -->
    <div>
      <label for="time" class="block font-bold mb-2">Date Range</label>
      <select
        name="time"
        id="time"
        class="border border-gray-300 rounded p-2 w-full"
        onchange="this.form.submit();"
      >
        <option value="all" <% if (time === 'all') { %>selected<% } %>>All</option>
        <option value="latest" <% if (time === 'latest') { %>selected<% } %>>Latest</option>
        <option value="last-week" <% if (time === 'last-week') { %>selected<% } %>>Last Week</option>
        <option value="last-month" <% if (time === 'last-month') { %>selected<% } %>>Last Month</option>
      </select>
    </div>
  
    <!-- Article Count -->
    <div class="mb-4">
      <p class="text-gray-700">Found <%= pagination.totalArticlesCount %> articles</p>
    </div>
  
    <!-- Articles List -->
    <% articles.forEach(article => { %>
    <div class="flex flex-col lg:flex-row border-b border-gray-300 pb-6 mb-6">
      <!-- Text Content -->
      <div class="lg:w-2/3 pr-6">
        <h4 class="text-red-500 text-sm font-semibold uppercase tracking-wide mb-2">
            <%= article.sectionId.name %>
        </h4>
        <h1 class="text-2xl font-bold leading-tight">
          <%= article.title %>
        </h1>
        <p class="text-gray-600 mt-2">
          <%= article.description %>
        </p>
        <div class="flex items-center mt-4">
          <p class="text-sm font-semibold text-gray-800 mr-2">
            By <%= article.author.name %>
          </p>
        </div>
      </div>
  
      <!-- Image -->
      <div class="lg:w-1/3 flex justify-end">
        <img
          src="<%= article.images[0] %>"
          alt="Illustration"
          class="w-full max-w-sm object-cover rounded"
        />
      </div>
    </div>
    <% }) %>
  </form>
  <!-- Pagination -->
  <div class="flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6">
    <div class="flex flex-1 justify-between sm:hidden">
      <a href="#" class="relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50">Previous</a>
      <a href="#" class="relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50">Next</a>
    </div>
    <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
      <div>
        <p class="text-sm text-gray-700">
          Showing
          <span class="font-medium"><%= articles.length %></span>
          of
          <span class="font-medium"><%= pagination.totalArticlesCount %></span>
          results
        </p>
      </div>
      <div>
        <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
          <!-- Previous Button -->
          <a 
            href="?<% if (searchValue != '') { %>searchValue=<%= searchValue %>&<% } %><% selectedSections.forEach(section => { %>sections=<%= section %>&<% }) %>pageNumber=<%= pagination.prevPage %><% if (pagination.pageSize) { %>pageSize=<%= pagination.pageSize %>&<% } %>" 
            class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 <%= !pagination.hasPrevPage ? 'pointer-events-none opacity-50' : '' %>">
            <span class="sr-only">Previous</span>
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
              <path d="M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z" />
            </svg>
          </a>
      
          <!-- Page Numbers -->
          <% for (let i = 1; i <= pagination.totalPagesCount; i++) { %>
            <% if (i === 1 || i === pagination.totalPagesCount || (i >= pagination.currentPageNumber - 1 && i <= pagination.currentPageNumber + 1)) { %>
              <!-- Display the page number -->
              <a 
                href="?<% if (searchValue != '') { %>searchValue=<%= searchValue %>&<% } %><% selectedSections.forEach(section => { %>sections=<%= section %>&<% }) %>pageNumber=<%= i %><% if (pagination.pageSize) { %>pageSize=<%= pagination.pageSize %>&<% } %>" 
                class="relative inline-flex items-center px-4 py-2 text-sm font-semibold <%= i === pagination.currentPageNumber ? 'bg-indigo-600 text-white' : 'text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50' %>">
                <%= i %>
              </a>
            <% } else if (i === pagination.currentPageNumber - 2 || i === pagination.currentPageNumber + 2) { %>
              <!-- Add dots -->
              <span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700">...</span>
            <% } %>
          <% } %>
      
          <!-- Next Button -->
          <a 
            href="?<% if (searchValue != '') { %>searchValue=<%= searchValue %>&<% } %><% selectedSections.forEach(section => { %>sections=<%= section %>&<% }) %>pageNumber=<%= pagination.nextPage %><% if (pagination.pageSize) { %>pageSize=<%= pagination.pageSize %>&<% } %>" 
            class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 <%= !pagination.hasNextPage ? 'pointer-events-none opacity-50' : '' %>">
            <span class="sr-only">Next</span>
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
              <path d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z" />
            </svg>
          </a>
        </nav>
      
        <!-- Results Info -->
        <div class="mt-4 text-sm text-gray-700">
          Results: <%= (pagination.currentPageNumber - 1) * 10 + 1 %> - 
          <%= Math.min(pagination.currentPageNumber * 10, pagination.totalArticlesCount) %> of 
          <%= pagination.totalArticlesCount %>
        </div>
      </div>
    </div>
  </div>
  
</div>
